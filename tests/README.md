# Tests for tests（テストのためのテスト）

このディレクトリには、１階層上のディレクトリにある**仕様チェック（「REG-XXX」）スクリプトをテストするためのスクリプト**が置かれています。

各「REG-XXX」スクリプトに対し、「REG-XXX_Test.php」が、各々の仕様を網羅しているかを確認するために使われています。

## テストの実行

### ローカル・テスト

仕様チェック・スクリプトの動作テストを行うには、このリポジトリのルートから以下のコマンドを実行します。

```bash
./tests/run-tests-locally.sh
```

- あらかじめ `docker` がインストールされている必要があります。

### ローカル・CI テスト

新規で作成した「仕様チェック」スクリプト、およびその「動作テスト」スクリプトを PR（PullRequest, プルリク）する際に、事前にローカルでテストを行いたい場合は、このリポジトリのルートから以下のコマンドを実行します。

```bash
circleci local execute
```

- あらかじめ `docker` と `CircleCI-CLI` がインストールされている必要があります。

## テストの作成ルール

- １つの仕様チェック用スクリプト（「REG-XXX」ファイル）に対し、１テストファイルとすること。（ファイル内のテスト数は任意）
- テストファイル名は仕様 ID に「`_Test.php`」のプレフィックスをつけること。（「REG-XXX_Test.php」）
  - 例）`REG-001` の場合のテストは `REG-001_Tests.php`
- 2019/04/16 現在、動作テストは PHP7 でのみ行なっています。`REG-000_Test.php` を参考に作成してください。
