# REG-XXX Script Requirements

確認コマンド（`REG-XXX`　のスクリプト）作成の要件。

## 入力（検証データの受け取り）

1. 受け取る検証データは文字列として受け取ること。
1. 第１引数が "-"（文字列のハイフン）の場合は、標準入力から検証データを受け取ること。
1. 第１引数が指定されていない場合は、ヘルプを表示すること。（下記「出力」の「ヘルプの表示」参照）
1. 引数で受け取る場合も、標準入力で受け取る場合も同じデータであること。
    - NG な例
        - 引数で受け取る場合はファイルのパス、標準入力で受け取る場合はファイルの内容
1. １検証につき、１検証データであること。（１検証１実行。複数の検証データを渡したい場合は、都度実行させること）
    - OK
        - 引数でファイルのパスを受け取り、ファイルを読み込んで検証する。この場合、標準入力で受け取るのもファイルのパスとなります。
        - 引数で文字列データを受け取り、検証する。この場合、標準入力で受け取るのも同じ文字列データとなります。
    - NG
        - 引数でディレクトリのパスなどを受け付けて、ディレクトリ内のファイルを各々検証する。
        - 引数で複数（改行区切り）のファイルのパスを受け取り、各々のファイルを読み込んで検証する。

### 引数からデータを受け取る場合

- 引数で検証データを受け取る場合は、第１引数からのみ受け取ること。
    - 第２引数以上の引数は無視してください。

### 標準入力からデータを受け取る場合

- 標準入力から検証データを受け取る場合、１回に受け取るデータ（開始から EOF まで）が 1 検証データとして処理すること。

## 出力（検証結果の出力）

### ヘルプの表示

- 第１引数に指定がない場合は、以下の出力をして終了すること：
  - ヘルプ（必要な引数やデータの情報）を「標準エラー出力」（`STDERR`）に出力すること。
  - 実行ステータス（終了ステータス）を 1 以上（1 〜 255 の整数）かつ REG ID と同じ値で終了すること。
    - 例えば `REG-002` の場合のステータスは "2" で終了される。

### OK 判定（検証をパスした場合、検証データに問題がない場合）

- 実行ステータス（終了ステータス）は "0"（整数のゼロ）を返すこと。
- テキストは何も出力しないこと。（'OK' や 'SUCCESS' などは不要です）

### NG 判定（検証をパスしなかった場合、検証データに問題があった場合）

- エラーの内容を「標準エラー出力」（`STDERR`）に出力すること。
- 実行ステータス（終了ステータス）は 1 以上（1 〜 255 の整数）かつ REG ID と同じ値で終了すること。
  - 例えば `REG-003` の場合のエラー時の実行エラー・ステータスは "3"　となる。

## 確認コマンドのプログラム言語（開発言語）

- 現在は PHP および sh のみです。
  - 同階層にある Dockerfile を編集し、その docker イメージ上でも動作する場合は、この限りではありません。
- 確認コマンド単体（単１ファイル）で動作するようにしてください。（外部ファイル化しない）

### Shebang

- １行目に Shebang を記載すること。
- Shebang は `/usr/bin/env` を通して指定すること。
  - PHP の場合は `#!/usr/bin/env php`
  - SH の場合は `#!/usr/bin/env sh`

### コーディング規約

- 特に定めていませんが、同１ファイル内で統一感があるようにしてください。
- 各言語の標準的な規約に準拠することを推奨します。
  - PHP → PSR-2 + PHP CS fixer で Linting しています。

### 文字コードと改行コード

- UTF-8, BOM なし、 LF

### コメント言語

- 日本語もしくは英語

## 開発に関する質問

既存のコマンドや上記を読んでもわかりづらい場合は、改善したいので Issue に遠慮なく質問してください。
